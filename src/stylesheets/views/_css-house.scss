@use "sass:math";

main.section-house {
  @keyframes gallery {
    from {
      transform: rotateY(0deg);
    }
    to {
      transform: rotateY(360deg);
    }
  }

  $width: 400px;
  $height: 400px;
  $door-width: 240px;
  $door-height: 280px;
  $roof-height: 20px;
  $base-height: 30px;
  $extra-roof: 70px;
  $extra-base: 280px;
  $door-frame-width: 16px;
  $frame-distance: 60px;

  .workarea {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100vh;
    background: #b9c9d3;
  }

  .house {
    position: relative;
    perspective: 6000px;
    width: $width;
    height: $height;
    animation: gallery 20s infinite linear;
    transform-style: preserve-3d;

    &:hover {
      .s1 {
        transform: rotateY(360deg) !important;
      }
      .s2 {
        transform: rotateY(450deg) !important;
      }
    }

    * {
      transition: 200ms ease all;
      position: absolute;
      &:hover {
        background-color: rgb(231 106 141 / 50%) !important;
      }
    }

    > .wall {
      width: $width;
      height: $height;

      &.main {
        &.right,
        &.left {
          background: rgb(76 136 160 / 50%);
        }
      }

      &.front,
      &.back {
        background: #ccc;
      }

      &.main {
        &.right {
          z-index: 0;
          right: -50%;
          transform: rotateY(90deg);
        }
        &.left {
          z-index: 0;
          left: -50%;
          transform: rotateY(90deg);
        }
      }
      &.front {
        z-index: 1;
        &.left {
          width: #{math.div($width, 2) - math.div($door-width, 2)};
          height: $height;
          transform: translateZ(#{math.div($width, 2)});
        }
        &.right {
          width: #{math.div($width, 2) - math.div($door-width, 2)};
          height: $height;
          transform: translateX(#{math.div($width, 2) + math.div($door-width, 2)}) translateZ(#{math.div($width, 2)});
        }
        &.top {
          width: $width;
          height: #{$height - $door-height};
          transform: translateZ(#{math.div($width, 2)});
        }
        &.door {
          width: $door-width;
          height: $door-height;
          background: transparent;
          transform: translateX(#{math.div($width, 2) - math.div($door-width, 2)}) translateY(#{$height - $door-height})
            translateZ(#{math.div($width, 2)});
          perspective: 6000px;
          transform-style: preserve-3d;

          .slide {
            background: rgb(76 136 160 / 50%);
            width: $door-width;
            height: $door-height;
            z-index: 2;
            transition: 1s ease all;
            &.s1 {
              transform: rotateY(0deg);
            }
            &.s2 {
              transform: rotateY(90deg);
            }
            .frame {
              z-index: 3;
              background: #333;
              &.center {
                width: $door-frame-width;
                height: $door-height;
                transform: translateX(#{math.div($door-width, 2) - math.div($door-frame-width, 2)});
              }
              &.right {
                width: $door-frame-width;
                height: $door-height;
                transform: translateX(#{$door-width - ($door-frame-width)});
              }
              &.left {
                width: $door-frame-width;
                height: $door-height;
              }
              &.top {
                width: $door-width;
                height: $door-frame-width;
              }
              &.bottom {
                width: $door-width;
                height: $door-frame-width;
                transform: translateY(#{$door-height - $door-frame-width});
              }
            }
          }
        }
      }
      &.back {
        z-index: -1;
        transform: translateZ(#{math.div(-$width, 2)});
      }
    }

    > .base {
      &.top,
      &.bottom {
        background: #9c9c9c;
      }
      &.right,
      &.left {
        background: #909090;
      }
      &.front,
      &.back {
        background: #969696;
      }
      &.top {
        width: #{$width + $extra-base};
        height: #{$height + $extra-base};
        transform: rotateX(90deg) translateX(#{math.div(-$extra-base, 2)}) translateZ(#{math.div(-$height, 2) + math.div($extra-base, 2)});
      }
      &.bottom {
        width: #{$width + $extra-base};
        height: #{$height + $extra-base};
        transform: rotateX(90deg) translateX(#{math.div(-$extra-base, 2)})
          translateZ(#{math.div(-$height, 2) + math.div($extra-base, 2) - $base-height});
      }
      &.front {
        width: #{$width + $extra-base};
        height: #{$base-height};
        transform: translateX(#{math.div(-$extra-base, 2)}) translateY(#{$height})
          translateZ(#{math.div($height, 2) + math.div($extra-base, 2)});
      }
      &.back {
        width: #{$width + $extra-base};
        height: #{$base-height};
        transform: translateX(#{math.div(-$extra-base, 2)}) translateY(#{$height})
          translateZ(#{(math.div(-$height, 2)) - math.div($extra-base, 2)});
      }
      &.right {
        width: #{$width + $extra-base};
        height: $base-height;
        transform: rotateY(90deg) translateY(#{$height}) translateZ(#{math.div($height, 2)});
      }
      &.left {
        width: #{$width + $extra-base};
        height: $base-height;
        transform: rotateY(90deg) translateY(#{$height}) translateZ(-#{math.div($height, 2) + $extra-base});
      }
    }

    > .roof {
      &.top,
      &.bottom {
        background: #4e4e4e;
      }
      &.front,
      &.back {
        background: #414141;
      }
      &.right,
      &.left {
        background: #474747;
      }
      &.bottom {
        width: #{$width + $extra-roof};
        height: #{$height + $extra-roof};
        transform: rotateX(90deg) translateX(#{math.div(-$extra-roof, 2)}) translateZ(#{math.div($height, 2) + math.div($extra-roof, 2)});
      }
      &.top {
        width: #{$width + $extra-roof};
        height: #{$height + $extra-roof};
        transform: rotateX(90deg) translateX(#{math.div(-$extra-roof, 2)})
          translateZ(#{math.div($height, 2) + math.div($extra-roof, 2) + $roof-height});
      }
      &.front {
        width: #{$width + $extra-roof};
        height: $roof-height;
        transform: translateX(#{math.div(-$extra-roof, 2)}) translateY(#{-$roof-height})
          translateZ(#{math.div($height, 2) + math.div($extra-roof, 2)});
      }
      &.back {
        width: #{$width + $extra-roof};
        height: $roof-height;
        transform: translateX(#{math.div(-$extra-roof, 2)}) translateY(#{-$roof-height})
          translateZ(-#{math.div($height, 2) + math.div($extra-roof, 2)});
      }
      &.left {
        width: #{$width + $extra-roof};
        height: $roof-height;
        transform: rotateY(90deg) translateY(#{-$roof-height}) translateZ(-#{math.div($height, 2) + $extra-roof});
      }
      &.right {
        width: #{$width + $extra-roof};
        height: $roof-height;
        transform: rotateY(90deg) translateY(#{-$roof-height}) translateZ(#{math.div($height, 2)});
      }
    }
  }
}
